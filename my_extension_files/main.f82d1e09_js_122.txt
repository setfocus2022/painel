,O(!1,t,"select"),t.isPropagationStopped()||null==C||C(e,t)})),T=(0,i.useMemo)((function(){return{toggle:O,placement:u,show:m,menuElement:b,toggleElement:E,setMenu:y,setToggle:S}}),[O,u,m,b,E,y,S]);b&&j&&!m&&(N.current=b.contains(b.ownerDocument.activeElement));var R=Qt((function(){E&&E.focus&&E.focus()})),_=Qt((function(){var e=k.current,t=l;if(null==t&&(t=!(!g.current||!ii(g.current))&&"keyboard"),!1!==t&&("keyboard"!==t||/^key.+$/.test(e))){var n=sr(g.current,s)[0];n&&n.focus&&n.focus()}}));(0,i.useEffect)((function(){m?_():N.current&&(N.current=!1,R())}),[m,N,R,_]),(0,i.useEffect)((function(){k.current=null}));var A=function(e,t){if(!g.current)return null;var n=sr(g.current,s),r=n.indexOf(e)+t;return n[r=Math.max(0,Math.min(r,n.length))]};return function(e,t,n,r){void 0===r&&(r=!1);var a=Qt(n);(0,i.useEffect)((function(){var n="function"===typeof e?e():e;return n.addEventListener(t,a,r),function(){return n.removeEventListener(t,a,r)}}),[e])}((0,i.useCallback)((function(){return f.document}),[f]),"keydown",(function(e){var t,n,r=e.key,a=e.target,o=null==(t=g.current)?void 0:t.contains(a),i=null==(n=w.current)?void 0:n.contains(a);if((!/input|textarea/i.test(a.tagName)||!(" "===r||"Escape"!==r&&o||"Escape"===r&&"search"===a.type))&&(o||i)&&("Tab"!==r||g.current&&m)){k.current=e.type;var s={originalEvent:e,source:e.type};switch(r){case"ArrowUp":var l=A(a,-1);return l&&l.focus&&l.focus(),void e.preventDefault();case"ArrowDown":if(e.preventDefault(),m){var c=A(a,1);c&&c.focus&&c.focus()}else h(!0,s);return;case"Tab":Et(a.ownerDocument,"keyup",(function(e){var t;("Tab"!==e.key||e.target)&&null!=(t=g.current)&&t.contains(e.target)||h(!1,s)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),h(!1,s)}}})),(0,Re.jsx)(Ie.Provider,{value:P,children:(0,Re.jsx)(la.Provider,{value:T,children:d})})}vi.displayName="Dropdown",vi.Menu=Ko,vi.Toggle=ui,vi.Item=mi;var gi=vi,yi=i.createContext({});yi.displayName="DropdownContext";var bi=yi,xi=["bsPre